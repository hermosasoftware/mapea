# MAPEA - Documentaci√≥n Completa de la Aplicaci√≥n

## üìã Tabla de Contenidos

1. [Resumen General](#resumen-general)
2. [Arquitectura y Stack Tecnol√≥gico](#arquitectura-y-stack-tecnol√≥gico)
3. [Caracter√≠sticas Implementadas](#caracter√≠sticas-implementadas)
4. [Sistema de Internacionalizaci√≥n (i18n)](#sistema-de-internacionalizaci√≥n-i18n)
5. [Componentes Personalizados](#componentes-personalizados)
6. [Hooks Personalizados](#hooks-personalizados)
7. [Utilidades y Helpers](#utilidades-y-helpers)
8. [SEO y Performance](#seo-y-performance)
9. [Estructura de Archivos](#estructura-de-archivos)
10. [Decisiones T√©cnicas](#decisiones-t√©cnicas)
11. [Fases de Desarrollo](#fases-de-desarrollo)
12. [Pr√≥ximos Pasos](#pr√≥ximos-pasos)

---

## üéØ Resumen General

**MAPEA** es una aplicaci√≥n web moderna para una empresa de levantamientos topogr√°ficos con drones LiDAR en Costa Rica. La aplicaci√≥n est√° construida como una Single Page Application (SPA) con soporte completo para internacionalizaci√≥n (ingl√©s y espa√±ol) y optimizada para SEO.

### Caracter√≠sticas Principales:
- üåê **Multiling√ºe**: Soporte completo para ingl√©s y espa√±ol
- üì± **Responsive**: Dise√±o adaptativo para todos los dispositivos
- ‚ö° **Performance**: Optimizada para velocidad y SEO
- üé® **Modern UI**: Interfaz moderna con animaciones suaves
- üîç **SEO Optimizado**: Meta tags, sitemap, y estructura sem√°ntica

---

## üèóÔ∏è Arquitectura y Stack Tecnol√≥gico

### Frontend Framework
- **Astro 4.x** - Framework principal
  - **¬øPor qu√© Astro?** 
    - Rendering h√≠brido (SSR + Static)
    - Performance superior con "Islands Architecture"
    - Soporte nativo para React, Vue, Svelte
    - SEO-friendly por defecto
    - Build optimizado autom√°ticamente

### UI Framework
- **React 18.x** - Para componentes interactivos
  - **¬øPor qu√© React?**
    - Ecosistema maduro y amplio
    - Excelente integraci√≥n con Astro
    - Componentes reutilizables
    - Hooks para l√≥gica de estado

### Styling
- **Tailwind CSS 3.x** - Framework de utilidades CSS
  - **¬øPor qu√© Tailwind?**
    - Desarrollo r√°pido con clases utilitarias
    - Consistencia en el dise√±o
    - Optimizaci√≥n autom√°tica (tree-shaking)
    - Responsive design f√°cil
    - Customizaci√≥n con design tokens

### Componentes UI
- **Radix UI** - Componentes accesibles
  - **¬øPor qu√© Radix UI?**
    - Accesibilidad (a11y) por defecto
    - Componentes headless (sin estilos)
    - API consistente
    - Soporte para teclado y screen readers
    - Componentes: Dialog, NavigationMenu, DropdownMenu

### Iconograf√≠a
- **React Icons** - Librer√≠a de iconos
  - **¬øPor qu√© React Icons?**
    - Amplia colecci√≥n de iconos
    - Consistencia visual
    - F√°cil integraci√≥n con React
    - Optimizaci√≥n autom√°tica

### Navegaci√≥n y Routing
- **Sistema Custom de Navegaci√≥n SPA** - Navegaci√≥n con URLs din√°micas
  - **¬øPor qu√© Sistema Custom?**
    - URLs din√°micas sin recargar la p√°gina
    - Historial completo del navegador (back/forward)
    - Scroll suave entre secciones
    - Detecci√≥n autom√°tica de secci√≥n visible
    - Sin dependencias externas pesadas
    - Control total sobre la implementaci√≥n

### Internacionalizaci√≥n
- **Sistema Custom** - i18n personalizado
  - **¬øPor qu√© Custom i18n?**
    - Compatibilidad con Astro SSR
    - Control total sobre la implementaci√≥n
    - Performance optimizada
    - Sin dependencias externas pesadas

---

## ‚ú® Caracter√≠sticas Implementadas

### 1. Sistema de Navegaci√≥n SPA con URLs Din√°micas

#### üéØ Objetivo
Implementar un sistema de navegaci√≥n que actualice la URL sin recargar la p√°gina, mostrando la secci√≥n actual en la barra de direcciones mientras mantiene una experiencia SPA fluida.

#### üèóÔ∏è Arquitectura

**Tres capas principales:**
1. **Astro (Build Time)**: Genera rutas est√°ticas con `getStaticPaths()`
2. **React Hook (Runtime)**: Maneja navegaci√≥n con History API
3. **Componentes (UI)**: Consumen el hook para navegaci√≥n

#### üì¶ Componentes del Sistema

**1. Rutas Din√°micas Astro**
```typescript
// src/pages/en/[section].astro
export async function getStaticPaths() {
  const sections = ['home', 'mission', 'services', 'contact'];
  return sections.map(section => ({ params: { section } }));
}
```
- Genera 4 p√°ginas HTML: `/en/home`, `/en/mission`, `/en/services`, `/en/contact`
- Todas tienen el mismo contenido (todas las secciones)
- SEO din√°mico seg√∫n la secci√≥n

**2. Hook useSectionRouter**
```typescript
// src/hooks/useSectionRouter.ts
export const useSectionRouter = (currentLang, initialSection) => {
  return {
    activeSection,      // Secci√≥n actualmente visible
    navigateToSection,  // Funci√≥n para navegar
    setActiveSection    // Actualizar estado manualmente
  };
}
```

**Funcionalidades:**
- **Navegaci√≥n por Click**: `pushState()` + scroll suave
- **Detecci√≥n Autom√°tica**: Intersection Observer detecta scroll
- **Back/Forward**: Event listener para `popstate`
- **URLs Directas**: Lee URL al cargar y hace scroll

**3. Integraci√≥n en Header**
```typescript
const { activeSection, navigateToSection } = useSectionRouter(currentLang);

<button onClick={() => navigateToSection("services")}>
  Services
</button>
```

#### üîÑ Flujos de Navegaci√≥n

**Click en Navbar:**
```
Usuario ‚Üí Click "Services"
    ‚Üì
navigateToSection("services")
    ‚Üì
pushState() ‚Üí URL: /en/services (sin recargar)
    ‚Üì
scrollIntoView({ behavior: 'smooth' })
    ‚Üì
Navbar marca "Services" como activo
```

**Scroll Manual:**
```
Usuario ‚Üí Scrollea hacia abajo
    ‚Üì
Intersection Observer detecta #services visible
    ‚Üì
replaceState() ‚Üí URL: /en/services (sin historial)
    ‚Üì
Navbar se actualiza autom√°ticamente
```

**Bot√≥n Atr√°s del Navegador:**
```
Usuario ‚Üí Presiona "Atr√°s"
    ‚Üì
popstate event
    ‚Üì
Lee state.section ‚Üí "home"
    ‚Üì
Scroll instant√°neo a #home
    ‚Üì
Navbar se actualiza
```

**URL Directa:**
```
Usuario ‚Üí Abre /en/services
    ‚Üì
Astro carga la p√°gina (todas las secciones)
    ‚Üì
React se hidrata
    ‚Üì
useSectionRouter lee URL ‚Üí "services"
    ‚Üì
Scroll autom√°tico a #services
```

#### üõ†Ô∏è Tecnolog√≠as Clave

| API/Tecnolog√≠a | Prop√≥sito |
|----------------|-----------|
| **History API** | `pushState()` / `replaceState()` - Cambiar URL |
| **Intersection Observer** | Detectar secci√≥n visible en viewport |
| **scrollIntoView()** | Scroll suave/instant√°neo |
| **popstate event** | Navegaci√≥n Back/Forward |
| **getStaticPaths()** | Generar rutas est√°ticas en build |

#### ‚úÖ Ventajas

- **SPA Real**: Nunca recarga al navegar
- **SEO Friendly**: Cada URL tiene su HTML est√°tico
- **URLs Compartibles**: `/en/services` lleva directamente a Services
- **Historial Completo**: Back/Forward funcionan perfectamente
- **Performance**: Solo carga una vez
- **Sin Dependencias**: No requiere react-router ni react-scroll

#### üìä Diferencias: pushState vs replaceState

| M√©todo | Cu√°ndo | Por qu√© |
|--------|--------|---------|
| **pushState()** | Click en navbar | Agregar al historial (permite volver atr√°s) |
| **replaceState()** | Scroll autom√°tico | Actualizar URL sin llenar el historial |

#### üîß Configuraci√≥n de Intersection Observer

```typescript
{
  root: null,                          // Viewport como root
  rootMargin: '-20% 0px -70% 0px',    // Activar en tercio superior
  threshold: 0                         // Detectar apenas entra
}
```
Esta configuraci√≥n marca la secci√≥n como activa cuando est√° en el tercio superior del viewport.

- **Header Responsivo**
  - Logo adaptativo (diferente para mobile/desktop)
  - Navegaci√≥n con URLs din√°micas
  - Language switcher integrado
  - CTA button para cotizaciones
  - Estados de scroll (transparente ‚Üí s√≥lido)
  - Hook `useSectionRouter` para navegaci√≥n

- **Mobile Menu**
  - Implementado con Radix UI Dialog
  - Navegaci√≥n completa en overlay
  - Integraci√≥n con useSectionRouter
  - Animaciones suaves
  - Accesibilidad completa

### 2. Secciones de Contenido

#### Home Section
- **Hero Section**
  - T√≠tulo animado con efecto stagger
  - Subt√≠tulos descriptivos
  - CTA principal
  - Background con imagen optimizada

- **Features Section**
  - Grid de caracter√≠sticas
  - Iconos descriptivos
  - Animaciones de entrada

#### Mission Section
- **Misi√≥n Principal**
  - T√≠tulo y descripci√≥n traducidos
  - Card con efecto glass morphism
  - Grid de valores corporativos
  - Call-to-action integrado

#### Services Section
- **Servicios Principales**
  - Layout de dos columnas
  - Video de drone integrado
  - Grid de servicios adicionales
  - Descripciones t√©cnicas detalladas

#### Clients Section
- **Portfolio de Clientes**
  - Grid de clientes con estad√≠sticas
  - Cards con hover effects
  - M√©tricas de rendimiento
  - Background con imagen profesional

#### Contact Section
- **Formulario de Contacto**
  - Formulario completo con validaci√≥n
  - Campos: nombre, email, tel√©fono, mensaje
  - Integraci√≥n con Formspree para env√≠o autom√°tico
  - Estados de loading, success y error
  - Informaci√≥n de contacto
  - Redes sociales
  - Imagen de fondo inspiracional

### 3. Footer
- **Informaci√≥n Corporativa**
  - Logo y slogan
  - Copyright
  - Informaci√≥n de contacto
  - Enlaces a redes sociales

---

## üåê Sistema de Internacionalizaci√≥n (i18n)

### Arquitectura del Sistema

#### 1. Detecci√≥n de Idioma
```typescript
// src/utils/i18n-astro.ts
export function getCurrentLanguage(url: URL): SupportedLanguage {
  const pathSegments = url.pathname.split('/').filter(Boolean);
  const firstSegment = pathSegments[0];
  
  if (firstSegment === 'es') return 'es';
  if (firstSegment === 'en') return 'en';
  return 'en'; // Default
}
```

#### 2. Carga de Traducciones
```typescript
export async function getTranslations(
  lang: SupportedLanguage, 
  key: keyof TranslationKeys
): Promise<any> {
  const translations = await import(`../i18n/locales/${lang}/${key}.json`);
  return translations.default;
}
```

#### 3. Estructura de Archivos
```
src/i18n/
‚îú‚îÄ‚îÄ types.ts                 # Tipos TypeScript
‚îú‚îÄ‚îÄ locales/
‚îÇ   ‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.json      # Traducciones comunes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigation.json  # Navegaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home.json        # Secci√≥n Home
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mission.json     # Secci√≥n Mission
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services.json    # Secci√≥n Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.json     # Secci√≥n Clients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contact.json     # Secci√≥n Contact
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ footer.json      # Footer
‚îÇ   ‚îî‚îÄ‚îÄ es/
‚îÇ       ‚îî‚îÄ‚îÄ [mismos archivos]
```

### Caracter√≠sticas del Sistema

#### 1. Type Safety
- **Tipos TypeScript** para todas las traducciones
- **Autocompletado** en el IDE
- **Validaci√≥n** en tiempo de compilaci√≥n

#### 2. Performance
- **Carga lazy** de traducciones
- **Caching** en memoria
- **Tree shaking** autom√°tico

#### 3. Flexibilidad
- **Traducciones anidadas** con dot notation
- **HTML inline** en traducciones
- **Interpolaci√≥n** de variables

#### 4. SEO Friendly
- **URLs sem√°nticas** (`/en/mission`, `/es/mision`)
- **Meta tags** por idioma
- **Hreflang** para motores de b√∫squeda

---

## üß© Componentes Personalizados

### üÜï Refactorizaci√≥n de Componentes (Diciembre 2024)

**Objetivo**: Extraer componentes reutilizables para mejorar la mantenibilidad y consistencia del c√≥digo.

#### Componentes UI Base Refactorizados
- **`FormField.tsx`** - Campo de formulario con validaci√≥n
  - Soporte para text, email, tel, textarea
  - Validaci√≥n integrada con react-hook-form
  - Estilos consistentes y responsive
  - Manejo de errores autom√°tico

- **`StatsCard.tsx`** - Tarjeta de estad√≠sticas
  - Variantes: default, glass, transparent
  - Tama√±os: sm, md, lg
  - Animaciones integradas
  - Responsive design

- **`IconCard.tsx`** - Tarjeta gen√©rica con icono
  - Configuraci√≥n flexible de iconos
  - Efectos hover personalizables
  - Alineaci√≥n de texto configurable
  - Variantes de padding y estilo

- **`CallToAction.tsx`** - Secci√≥n CTA reutilizable
  - Botones primario y secundario
  - Layouts vertical y horizontal
  - Variantes de tarjeta configurables
  - Integraci√≥n con scroll smooth

- **`HeroTitle.tsx`** - T√≠tulo principal con animaciones
  - M√∫ltiples l√≠neas con highlight
  - Tama√±os responsive (sm, md, lg, xl)
  - Animaciones staggered individuales
  - Configuraci√≥n de spacing y alineaci√≥n

#### Componentes Espec√≠ficos Refactorizados
- **`ValueCard.tsx`** - Tarjeta de valor (Mission)
  - Basado en IconCard
  - Efectos hover espec√≠ficos
  - Animaciones staggered
  - Integraci√≥n con react-icons

- **`ServiceCard.tsx`** - Tarjeta de servicio (Services)
  - Placeholder de imagen con icono
  - Efectos hover personalizados
  - Layout optimizado para servicios
  - Grid responsive

- **`ClientCard.tsx`** - Tarjeta de cliente (Clients)
  - Informaci√≥n del cliente
  - Estad√≠sticas integradas
  - Efectos hover complejos
  - Layout de 3 columnas para stats

#### Beneficios de la Refactorizaci√≥n
- ‚úÖ **Reutilizaci√≥n**: Componentes m√°s peque√±os y espec√≠ficos
- ‚úÖ **Mantenibilidad**: C√≥digo m√°s limpio y organizado
- ‚úÖ **Consistencia**: Dise√±o unificado en toda la app
- ‚úÖ **Performance**: Lazy loading m√°s granular
- ‚úÖ **Testing**: Componentes individuales m√°s f√°ciles de testear

#### Problemas T√©cnicos Resueltos
- **‚ùå Cards no se mostraban**: Eliminado `client:load` de componentes React
- **‚ùå HeroTitle excesivamente grande**: Corregidos tama√±os responsive
- **‚ùå Error de renderer**: Corregidas importaciones con extensiones `.tsx`
- **‚ùå Errores de tipos**: Corregidos tipos en CallToAction para Button sizes
- **‚ùå Animaciones staggered**: Implementadas animaciones individuales por l√≠nea

#### Correcciones de Importaciones
```typescript
// Antes (incorrecto)
import { Header } from '../components/layout/Header';

// Despu√©s (correcto)
import { Header } from '../components/layout/Header.tsx';
```

### 1. Header Component (`src/components/layout/Header.tsx`)

**¬øPor qu√© es personalizado?**
- Integraci√≥n compleja de navegaci√≥n, language switcher y mobile menu
- L√≥gica de scroll state management
- Responsive behavior espec√≠fico
- Integraci√≥n con react-scroll

**Caracter√≠sticas:**
- Estado de scroll (transparente ‚Üí s√≥lido)
- Navegaci√≥n con spy activo
- Language switcher integrado
- Mobile menu con Radix UI
- Logo adaptativo

### 2. Language Switcher (`src/components/ui/LanguageSwitcher.tsx`)

**¬øPor qu√© es personalizado?**
- Comportamiento espec√≠fico por dispositivo
- Integraci√≥n con sistema i18n custom
- Estados visuales adaptativos
- Sin dependencias externas

**Caracter√≠sticas:**
- Variante minimal (solo icono)
- Estados visuales por scroll
- Mobile: siempre negro
- Desktop: adaptativo al scroll
- Icono FaGlobe de react-icons

### 3. Mobile Menu (`src/components/ui/MobileMenu.tsx`)

**¬øPor qu√© es personalizado?**
- Integraci√≥n con react-scroll
- Navegaci√≥n espec√≠fica para mobile
- Estados de scroll adaptativos
- Accesibilidad completa

**Caracter√≠sticas:**
- Implementado con Radix UI Dialog
- Navegaci√≥n con scroll suave
- Estados visuales adaptativos
- Language switcher integrado

### 4. Card Component (`src/components/ui/Card.tsx`)

**¬øPor qu√© es personalizado?**
- Variantes espec√≠ficas del dise√±o
- Efectos glass morphism
- Sistema de padding consistente
- Hover effects personalizados

**Variantes:**
- `default`: Card b√°sica con sombra
- `dark`: Card con fondo oscuro
- `glass`: Efecto glass morphism
- `transparent`: Fondo transparente

### 5. Button Component (`src/components/ui/Button.tsx`)

**¬øPor qu√© es personalizado?**
- Variantes espec√≠ficas del dise√±o
- Estados de hover consistentes
- Integraci√≥n con Radix UI
- Accesibilidad mejorada

**Variantes:**
- `primary`: Bot√≥n principal
- `outline`: Bot√≥n con borde
- `ghost`: Bot√≥n transparente

### 6. OptimizedImage Components

**¬øPor qu√© son personalizados?**
- Optimizaci√≥n autom√°tica de im√°genes
- Lazy loading
- Formatos modernos (WebP)
- Responsive images

**Componentes:**
- `OptimizedImage.astro`: Para Astro
- `OptimizedImageReact.tsx`: Para React

**Cu√°ndo usar cada uno:**
- **Astro**: En archivos `.astro` (Mission, Services, Clients)
- **React**: En componentes React (Header, Contact)

### 7. Form Component (`src/components/ui/Form.tsx`)

**¬øPor qu√© es personalizado?**
- Formulario reutilizable con integraci√≥n Formspree
- Validaci√≥n completa con react-hook-form
- Estados de loading, success y error
- Campos configurables (text, email, tel, textarea)

**Caracter√≠sticas:**
- Integraci√≥n con Formspree para env√≠o de emails
- Validaci√≥n autom√°tica de campos requeridos
- Mensajes de √©xito y error con auto-reset
- Campos: name, phone, email, message
- Responsive design con animaciones
- Env√≠o mediante fetch nativo (sin dependencias externas)
- Manejo de errores con try/catch

**Uso:**
```tsx
<Form
  translations={translations}
  commonTranslations={commonTranslations}
  currentLang={currentLang}
/>
```

### 8. ContactMethods Component (`src/components/ui/ContactMethods.tsx`)

**¬øPor qu√© es personalizado?**
- M√©todos de contacto reutilizables
- Integraci√≥n con animaciones y estilos
- Informaci√≥n de contacto centralizada

**Caracter√≠sticas:**
- M√©todos: tel√©fono y email
- Cards con efectos glass morphism
- Animaciones staggered
- Hover effects personalizados
- Integraci√≥n con useIntersectionObserver

**Uso:**
```tsx
<ContactMethods
  translations={translations}
  currentLang={currentLang}
/>
```

### 7. SEO Component (`src/components/SEO.astro`)

**¬øPor qu√© es personalizado?**
- Meta tags din√°micos por idioma
- Schema.org estructurado
- Hreflang autom√°tico
- Breadcrumbs opcionales

**Caracter√≠sticas:**
- Meta tags completos
- Open Graph y Twitter Cards
- JSON-LD estructurado
- URLs alternativas

### 8. Breadcrumbs Component (`src/components/Breadcrumbs.astro`)

**¬øPor qu√© es personalizado?**
- Schema.org markup
- Navegaci√≥n sem√°ntica
- Estilos consistentes
- Accesibilidad completa

### 9. ÔøΩÔøΩ Componentes 3D - Modelo del Dron LiDAR

**¬øPor qu√© son personalizados?**
- Integraci√≥n compleja con Three.js
- Modelo 3D espec√≠fico del dron DJI M350
- Animaciones personalizadas
- Optimizaci√≥n de performance para web
- Fallback elegante durante carga

#### **DroneModel.tsx - Componente Principal**

**Stack Tecnol√≥gico:**
- **React Three Fiber**: React renderer para Three.js
- **Drei**: Helpers y abstracciones para R3F
- **Three.js**: Motor 3D principal
- **GLTF Loader**: Para cargar modelos 3D

**Caracter√≠sticas T√©cnicas:**
```typescript
// Configuraci√≥n del Canvas
<Canvas
  camera={{ position: [0, 0, 8], fov: 45 }}
  gl={{ antialias: true, alpha: true, powerPreference: "high-performance" }}
  dpr={[1, 2]}
>
```

**Sistema de Iluminaci√≥n:**
- **AmbientLight**: Iluminaci√≥n general suave (intensity: 0.4)
- **DirectionalLight**: Luz direccional con sombras (intensity: 1.5)
- **PointLight**: Luz de relleno (intensity: 0.5)
- **Environment**: Entorno HDR "city" para reflejos realistas

**Animaciones Personalizadas:**
```typescript
useFrame((state) => {
  // Rotaci√≥n sutil en Y
  meshRef.current.rotation.y = Math.sin(state.clock.elapsedTime * 0.2) * 0.05;
  // Flotaci√≥n sutil
  meshRef.current.position.y = Math.sin(state.clock.elapsedTime * 0.4) * 0.05;
});
```

**Controles de Interacci√≥n:**
- **PresentationControls**: Controles de presentaci√≥n con snap
- **OrbitControls**: Controles de √≥rbita con l√≠mites
- **Auto-rotate**: Rotaci√≥n autom√°tica opcional
- **Zoom**: Control de acercamiento (5-15 unidades)

**Modelo 3D:**
- **DJI M350**: Dron profesional real
- **Zenmuse L2**: Esc√°ner LiDAR integrado
- **Formato GLB**: Optimizado para web
- **Escala 2.2x**: Tama√±o optimizado
- **Precarga**: `useGLTF.preload()` para mejor performance

#### **DroneModelFallback.tsx - Componente de Carga**

**Dise√±o Visual:**
- **Gradiente**: Fondo degradado oscuro
- **Icono principal**: Avi√≥n con animaciones
- **Anillos**: Rotaci√≥n y pulso
- **Puntos animados**: Patr√≥n de fondo
- **Efecto scan**: L√≠nea de escaneo LiDAR

**Estados de Carga:**
```typescript
const loadingStages = [
  "Inicializando Three.js...",
  "Descargando modelo GLB...", 
  "Procesando geometr√≠a...",
  "Configurando materiales...",
  "Optimizando renderizado...",
  "Casi listo..."
];
```

**Barra de Progreso:**
- **Animada**: Progreso din√°mico
- **Gradiente**: Colores de la marca
- **Porcentaje**: Indicador num√©rico
- **Puntos animados**: Efecto de carga

#### **Optimizaciones de Performance**

**Lazy Loading:**
```typescript
const DroneModel = lazy(() => import("../3D/DroneModel"));
```

**Suspense:**
```typescript
<Suspense fallback={<DroneModelFallback />}>
  <DroneModel />
</Suspense>
```

**Code Splitting:**
- **Chunk separado**: Three.js en bundle independiente
- **Tree shaking**: Eliminaci√≥n de c√≥digo no usado
- **Precarga**: Modelo cargado anticipadamente

**Beneficios:**
- ‚úÖ **Realismo**: Modelo 3D detallado del dron real
- ‚úÖ **Interactividad**: Controles intuitivos
- ‚úÖ **Performance**: Optimizado para web
- ‚úÖ **UX**: Fallback elegante durante carga
- ‚úÖ **Responsive**: Se adapta a diferentes pantallas
- ‚úÖ **SEO**: Lazy loading no bloquea la p√°gina

---

## üé£ Hooks Personalizados

### 1. useSectionRouter (`src/hooks/useSectionRouter.ts`)

**¬øPor qu√© es personalizado?**
- Navegaci√≥n SPA con URLs din√°micas
- Sin dependencias externas (react-router)
- Integraci√≥n con History API
- Intersection Observer para detecci√≥n autom√°tica
- Soporte completo para back/forward

**Caracter√≠sticas:**
```typescript
export const useSectionRouter = (
  currentLang: SupportedLanguage,
  initialSection: string = 'home'
) => {
  const [activeSection, setActiveSection] = useState<string>(initialSection);
  
  const navigateToSection = useCallback((sectionId: string) => {
    // 1. Actualizar URL con pushState
    window.history.pushState({ section: sectionId }, '', `/${currentLang}/${sectionId}`);
    
    // 2. Scroll suave a la secci√≥n
    document.getElementById(sectionId)?.scrollIntoView({ behavior: 'smooth' });
    
    // 3. Actualizar estado
    setActiveSection(sectionId);
  }, [currentLang]);
  
  // Intersection Observer para detecci√≥n autom√°tica
  // popstate listener para back/forward
  // Inicializaci√≥n desde URL
  
  return { activeSection, navigateToSection, setActiveSection };
}
```

**Funcionalidades:**
- `navigateToSection()`: Navegar con click (pushState + scroll)
- `activeSection`: Secci√≥n actualmente visible
- Detecci√≥n autom√°tica con Intersection Observer
- Manejo de back/forward con popstate
- Scroll autom√°tico desde URLs directas

**Uso:**
```typescript
const { activeSection, navigateToSection } = useSectionRouter('en');

<button onClick={() => navigateToSection('services')}>
  Services
</button>
```

### 2. useTranslations (`src/hooks/useTranslations.ts`)

**¬øPor qu√© es personalizado?**
- Compatibilidad con Astro SSR
- Sin dependencias de react-i18next
- Performance optimizada
- Type safety completo

```typescript
export function useTranslations(
  translations: Record<string, any>,
  currentLang: SupportedLanguage
) {
  const t = useCallback((key: string) => {
    return getNestedValue(translations, key) || key;
  }, [translations]);

  const changeLanguage = useCallback((newLang: SupportedLanguage) => {
    const currentPath = window.location.pathname;
    const newPath = currentPath.replace(`/${currentLang}`, `/${newLang}`);
    window.location.href = newPath;
  }, [currentLang]);

  return { t, changeLanguage };
}
```

**Caracter√≠sticas:**
- Funci√≥n `t()` para traducciones
- Funci√≥n `changeLanguage()` para cambio de idioma
- Soporte para traducciones anidadas
- Fallback a la clave si no encuentra traducci√≥n

### 3. useIntersectionObserver (`src/hooks/useIntersectionObserver.ts`)

**¬øPor qu√© es personalizado?**
- Detecci√≥n de elementos en viewport
- Reutilizable en m√∫ltiples componentes
- Hook optimizado para performance

**Uso:**
- Contact.tsx: Animaciones al entrar en viewport
- ContactMethods.tsx: Animaciones staggered

### 4. Hooks Eliminados (Evoluci√≥n del Proyecto)

Durante el desarrollo, se crearon y eliminaron varios hooks:

#### react-scroll (Eliminado - Octubre 2025)
- **¬øPor qu√© se elimin√≥?** Reemplazado por useSectionRouter
- **Problema:** No soportaba URLs din√°micas
- **Soluci√≥n:** Sistema custom con History API

#### useScrollSpy (Eliminado)
- **¬øPor qu√© se elimin√≥?** Reemplazado por useSectionRouter
- **Problema:** Duplicaci√≥n de funcionalidad
- **Soluci√≥n:** Intersection Observer integrado

#### useSimpleTranslation (Eliminado)
- **¬øPor qu√© se elimin√≥?** Reemplazado por useTranslations
- **Problema:** L√≥gica compleja innecesaria
- **Soluci√≥n:** Hook m√°s simple y directo

#### useClientTranslation (Eliminado)
- **¬øPor qu√© se eliminado?** Problemas con SSR
- **Problema:** Violaci√≥n de Rules of Hooks
- **Soluci√≥n:** Sistema i18n basado en props

---

## üõ†Ô∏è Utilidades y Helpers

### 1. i18n-astro.ts (`src/utils/i18n-astro.ts`)

**Funciones principales:**
- `getCurrentLanguage()`: Detecta idioma de la URL
- `getTranslations()`: Carga traducciones por idioma
- `getSeoTranslations()`: Carga traducciones SEO

### 2. seo.ts (`src/utils/seo.ts`)

**Funciones principales:**
- `generateSEOTags()`: Genera meta tags completos
- `generateBreadcrumbs()`: Crea breadcrumbs navegacionales
- `generateJSONLD()`: Genera Schema.org estructurado
- `detectUserLanguage()`: Detecta idioma del navegador
- `generateAlternateUrls()`: Crea URLs alternativas

### 3. constants.ts (`src/data/constants.ts`)

**Datos est√°ticos:**
- `NAVIGATION_ITEMS`: Items de navegaci√≥n
- `COMPANY_INFO`: Informaci√≥n corporativa
- `SERVICES`: Lista de servicios
- `VALUES`: Valores corporativos

---

## üîç SEO y Performance

### 1. SEO Implementado

#### Meta Tags Din√°micos
- T√≠tulos y descripciones por idioma
- Open Graph y Twitter Cards
- Canonical URLs
- Hreflang para contenido multiling√ºe

#### Schema.org Estructurado
- LocalBusiness markup
- Service catalog
- Contact information
- Geographic coordinates

#### Sitemap y Robots
- Sitemap XML din√°mico
- Robots.txt optimizado
- URLs alternativas por idioma

### 2. Performance Optimizations

#### Image Optimization
- WebP format autom√°tico
- Lazy loading
- Responsive images
- Unique hashing para cache

#### Code Splitting
- Componentes React con lazy loading
- Chunks separados para Three.js
- Tree shaking autom√°tico

#### CSS Optimization
- Tailwind CSS con purging
- CSS modules para componentes
- Critical CSS inlined

---

## üìÅ Estructura de Archivos

```
mapea/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Header.tsx              # Header principal con useSectionRouter
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sections/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home.tsx                # Secci√≥n Home (React)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Contact.tsx             # Secci√≥n Contact (React)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Mission.astro           # Secci√≥n Mission (Astro)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services.astro          # Secci√≥n Services (Astro)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clients.astro           # Secci√≥n Clients (Astro)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer.astro            # Footer (Astro)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx              # Componente Button
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Card.tsx                # Componente Card
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ LanguageSwitcher.tsx    # Language Switcher
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MobileMenu.tsx          # Mobile Menu
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ OptimizedImage.astro    # Imagen optimizada (Astro)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ OptimizedImageReact.tsx # Imagen optimizada (React)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SEO.astro               # Componente SEO
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Breadcrumbs.astro       # Breadcrumbs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FormField.tsx           # üÜï Campo de formulario
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Form.tsx                # üÜï Formulario reutilizable
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ContactMethods.tsx      # üÜï M√©todos de contacto
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MissionCTA.tsx          # üÜï CTA espec√≠fico para Mission
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ StatsCard.tsx           # üÜï Tarjeta de estad√≠sticas
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ IconCard.tsx            # üÜï Tarjeta con icono
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CallToAction.tsx        # üÜï Secci√≥n CTA
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ HeroTitle.tsx           # üÜï T√≠tulo principal
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ValueCard.tsx           # üÜï Tarjeta de valor
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ServiceCard.tsx         # üÜï Tarjeta de servicio
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ClientCard.tsx          # üÜï Tarjeta de cliente
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useSectionRouter.ts         # üÜï Hook de navegaci√≥n SPA
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useIntersectionObserver.ts  # Hook de detecci√≥n viewport
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useTranslations.ts          # Hook de traducciones
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n-astro.ts              # Utilidades i18n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seo.ts                     # Utilidades SEO
‚îÇ   ‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                   # Tipos i18n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ locales/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ en/                    # Traducciones ingl√©s
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ es/                    # Traducciones espa√±ol
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.ts               # Constantes y datos
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css                # Estilos globales
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ animations/                # CSS modules para animaciones
‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îú‚îÄ‚îÄ assets/                        # üÜï Assets organizados por categor√≠a
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backgrounds/               # üÜï Im√°genes de fondo
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tropical-jungle.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ business-landscape.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ additional-landscape.jpeg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logos/                     # üÜï Logos de la empresa
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapea-logo-transparent-01.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapea-logo-transparent-03.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mapea-logo-single.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ videos/                    # üÜï Videos promocionales
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ drone-lidar-demo-360p.mp4
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ drone-lidar-demo-540p.mp4
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ icons/                     # üÜï Iconos personalizados
‚îÇ   ‚îú‚îÄ‚îÄ 3D/                           # ÔøΩÔøΩ Componentes 3D
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DroneModel.tsx            # üÜï Modelo 3D del dron
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DroneModelFallback.tsx    # üÜï Fallback de carga
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts              # Constantes y datos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assets.ts                 # üÜï Referencias centralizadas de assets
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Layout.astro               # Layout principal
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useTranslations.ts        # Hook de traducciones
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n-astro.ts              # Utilidades i18n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seo.ts                     # Utilidades SEO
‚îÇ   ‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                   # Tipos i18n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ locales/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ en/                    # Traducciones ingl√©s
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ es/                    # Traducciones espa√±ol
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts              # Constantes y datos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assets.ts                 # üÜï Referencias centralizadas de assets
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css                # Estilos globales
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ animations/                # CSS modules para animaciones
‚îÇ   ‚îú‚îÄ‚îÄ assets/                        # üÜï Assets organizados por categor√≠a
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backgrounds/               # üÜï Im√°genes de fondo
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tropical-jungle.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ business-landscape.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ additional-landscape.jpeg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logos/                     # üÜï Logos de la empresa
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapea-logo-transparent-01.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapea-logo-transparent-03.png
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mapea-logo-single.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ videos/                    # üÜï Videos promocionales
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ drone-lidar-demo-360p.mp4
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ drone-lidar-demo-540p.mp4
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ icons/                     # üÜï Iconos personalizados
‚îÇ   ‚îú‚îÄ‚îÄ 3D/                           # üÜï Componentes 3D
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DroneModel.tsx            # üÜï Modelo 3D del dron
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DroneModelFallback.tsx    # üÜï Fallback de carga
‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Layout.astro               # Layout principal
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îú‚îÄ‚îÄ index.astro                # P√°gina principal (redirect)
‚îÇ       ‚îú‚îÄ‚îÄ 404.astro                  # üÜï P√°gina 404 personalizada
‚îÇ       ‚îú‚îÄ‚îÄ en/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ [section].astro        # üÜï Rutas din√°micas ingl√©s
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ index.astro            # Redirect a /en/home
‚îÇ       ‚îú‚îÄ‚îÄ es/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ [section].astro        # üÜï Rutas din√°micas espa√±ol
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ index.astro            # Redirect a /es/home
‚îÇ       ‚îú‚îÄ‚îÄ sitemap.xml.ts             # Sitemap din√°mico
‚îÇ       ‚îî‚îÄ‚îÄ robots.txt.ts              # Robots.txt
‚îú‚îÄ‚îÄ astro.config.mjs                   # Configuraci√≥n Astro
‚îú‚îÄ‚îÄ package.json                       # Dependencias
‚îî‚îÄ‚îÄ APP_DOCUMENTATION.md               # Esta documentaci√≥n
```

---

## ü§î Decisiones T√©cnicas

### 1. ¬øPor qu√© Astro + React?

**Ventajas:**
- **Performance**: Astro renderiza HTML est√°tico, React solo donde es necesario
- **SEO**: SSR nativo para mejor SEO
- **Flexibilidad**: Puede usar m√∫ltiples frameworks
- **Build optimizado**: Tree shaking y code splitting autom√°tico

**Desventajas:**
- **Curva de aprendizaje**: Conceptos h√≠bridos
- **Limitaciones**: Algunas funcionalidades React no disponibles en SSR

### 2. ¬øPor qu√© Sistema i18n Custom?

**Problema con react-i18next:**
- Incompatibilidad con Astro SSR
- Errores de `useContext` en server-side
- Violaci√≥n de Rules of Hooks

**Soluci√≥n Custom:**
- Compatibilidad total con Astro
- Performance optimizada
- Control total sobre la implementaci√≥n
- Type safety completo

### 3. ¬øPor qu√© Radix UI?

**Ventajas:**
- **Accesibilidad**: a11y por defecto
- **Headless**: Sin estilos, total control
- **API consistente**: Patrones predecibles
- **Mantenido**: Librer√≠a activa y confiable

### 4. ¬øPor qu√© Tailwind CSS?

**Ventajas:**
- **Desarrollo r√°pido**: Clases utilitarias
- **Consistencia**: Design system integrado
- **Performance**: Purging autom√°tico
- **Responsive**: Breakpoints integrados

### 5. ¬øPor qu√© Sistema de Routing Custom?

**Problema con react-scroll:**
- No actualiza la URL
- URLs no compartibles
- Sin soporte para back/forward
- Sin historial del navegador

**Soluci√≥n Custom (useSectionRouter):**
- **URLs Din√°micas**: Actualiza URL sin recargar
- **Historial**: Soporte completo para back/forward
- **SEO**: Cada secci√≥n tiene su URL √∫nica
- **Compartible**: URLs como `/en/services` funcionan
- **Sin dependencias**: Historia API nativa
- **Performance**: Optimizado con Intersection Observer

---

## üìà Fases de Desarrollo

### ‚úÖ Fase 1: Configuraci√≥n B√°sica de i18n
- Configuraci√≥n inicial de Astro
- Sistema de traducciones b√°sico
- Estructura de archivos i18n
- Tipos TypeScript

### ‚úÖ Fase 2: Componentes React con i18n
- Header con navegaci√≥n
- Home section
- Contact section
- Language switcher b√°sico

### ‚úÖ Fase 3: Language Switcher Avanzado
- Integraci√≥n con Radix UI
- Estados visuales adaptativos
- Mobile menu
- Navegaci√≥n con react-scroll

### ‚úÖ Fase 4: Componentes Astro con i18n
- Mission section
- Services section  
- Clients section
- Footer section
- Traducciones completas

### ‚úÖ Fase 5: SEO y Advanced Routing
- Sitemap din√°mico
- Robots.txt
- Meta tags avanzados
- JSON-LD Schema.org
- Open Graph y Twitter Cards
- Hreflang para SEO multiling√ºe

### ‚úÖ Fase 6: Sistema de Navegaci√≥n SPA (Octubre 2025)
- **Objetivo**: Implementar navegaci√≥n con URLs din√°micas
- **Componentes Creados**:
  - useSectionRouter hook
  - Rutas din√°micas [section].astro
  - P√°gina 404 personalizada
- **Problemas Resueltos**:
  - URLs no reflejaban la secci√≥n actual
  - Sin soporte para back/forward
  - URLs no compartibles
  - react-scroll eliminado (dependencia innecesaria)
- **Resultado**:
  - SPA completa con URLs din√°micas
  - Historial del navegador funcional
  - SEO mejorado con URLs √∫nicas
  - 6 paquetes menos en node_modules

### ‚úÖ Fase 7: Refactorizaci√≥n de Componentes (Diciembre 2024)
- **Objetivo**: Mejorar mantenibilidad y reutilizaci√≥n
- **Componentes Base Creados**:
  - FormField, StatsCard, IconCard
  - CallToAction, HeroTitle
- **Componentes Espec√≠ficos Creados**:
  - ValueCard, ServiceCard, ClientCard
- **Secciones Refactorizadas**:
  - Home, Mission, Services, Clients, Contact
- **Problemas Resueltos**:
  - Cards no se mostraban (client:load en React)
  - HeroTitle excesivamente grande
  - Errores de importaci√≥n (.tsx)
  - Errores de tipos TypeScript

### ‚úÖ Fase 5: SEO y Meta Tags Avanzados
- Sitemap XML din√°mico
- Robots.txt optimizado
- Meta tags din√°micos
- Schema.org estructurado
- Breadcrumbs
- Utilidades SEO

### üîÑ Fase 6: Testing y Optimizaci√≥n (Pendiente)
- Tests unitarios
- Tests de integraci√≥n
- Performance testing
- SEO audit
- Accessibility audit

### üîÑ Fase 7: Funcionalidades Avanzadas (Pendiente)
- Formulario de contacto funcional
- Analytics integrado
- PWA features
- Advanced animations
- Performance monitoring

---

## üöÄ Pr√≥ximos Pasos

### ‚úÖ Completado (Diciembre 2024)
- **Refactorizaci√≥n de Componentes**: 8 nuevos componentes reutilizables
- **Correcci√≥n de Bugs**: Cards, HeroTitle, importaciones
- **Mejora de Mantenibilidad**: C√≥digo m√°s limpio y organizado
- **Consistencia Visual**: Dise√±o unificado en toda la app

### Inmediatos
1. **Testing**: Implementar tests unitarios para nuevos componentes
2. **Performance**: Optimizaciones adicionales con los nuevos componentes
3. **Accessibility**: Audit completo de a11y
4. **SEO**: Validaci√≥n con herramientas

### Mediano Plazo
1. **Formulario**: Backend para formulario de contacto
2. **Analytics**: Google Analytics 4
3. **PWA**: Service worker y manifest
4. **CMS**: Integraci√≥n con headless CMS

### Largo Plazo
1. **Blog**: Sistema de blog multiling√ºe
2. **Componentes Adicionales**: M√°s componentes reutilizables
3. **Storybook**: Documentaci√≥n de componentes
4. **Portfolio**: Galer√≠a de proyectos
5. **Calculadora**: Herramienta de cotizaci√≥n
6. **API**: API REST para datos din√°micos

---


## üìã Resumen de Cambios Recientes

### üöÄ Sistema de Navegaci√≥n SPA (Octubre 2025)

#### üÜï Nuevas Funcionalidades
1. **useSectionRouter Hook** - Sistema de navegaci√≥n personalizado
   - History API para URLs din√°micas
   - Intersection Observer para detecci√≥n autom√°tica
   - Soporte completo para back/forward
   - Scroll suave a secciones

2. **Rutas Din√°micas Astro** - `/en/[section].astro` y `/es/[section].astro`
   - getStaticPaths() genera rutas est√°ticas
   - SEO din√°mico por secci√≥n
   - Todas las secciones en una p√°gina

3. **P√°gina 404** - P√°gina de error personalizada
   - Detecta idioma desde URL
   - Dise√±o dark minimalista
   - Link para volver al inicio

#### üîß Archivos Modificados
- **Header.tsx**: Integrado con useSectionRouter
- **MobileMenu.tsx**: Navegaci√≥n con navigateToSection
- **Home.tsx**: Bot√≥n Get Quote actualizado
- **constants.ts**: Limpieza de propiedades href innecesarias

#### üóëÔ∏è C√≥digo Eliminado
- **react-scroll**: 6 paquetes removidos
- **@types/react-scroll**: Ya no necesario
- **Imports innecesarios**: COMPANY_INFO sin uso
- **C√≥digo comentado**: Logo en Home.tsx
- **Documentaci√≥n temporal**: 3 archivos MD eliminados

#### ‚úÖ Beneficios
- ‚úÖ **URLs Din√°micas**: `/en/home`, `/en/services`, etc.
- ‚úÖ **SPA Completa**: Sin recargas de p√°gina
- ‚úÖ **SEO Mejorado**: URLs √∫nicas por secci√≥n
- ‚úÖ **Historial**: Back/Forward funcionan
- ‚úÖ **Compartible**: URLs directas funcionan
- ‚úÖ **Menos c√≥digo**: 6 paquetes eliminados
- ‚úÖ **Sin dependencias**: Sistema nativo con APIs web

---

### üì¶ Refactorizaci√≥n de Componentes (Diciembre 2024)

### üÜï Nuevos Componentes Creados
1. **FormField.tsx** - Campo de formulario reutilizable
2. **Form.tsx** - Formulario completo con integraci√≥n Formspree
3. **ContactMethods.tsx** - M√©todos de contacto reutilizables
4. **MissionCTA.tsx** - CTA espec√≠fico para Mission con scroll funcional
5. **StatsCard.tsx** - Tarjeta de estad√≠sticas
6. **IconCard.tsx** - Tarjeta gen√©rica con icono
7. **CallToAction.tsx** - Secci√≥n CTA reutilizable
8. **HeroTitle.tsx** - T√≠tulo principal con animaciones
9. **ValueCard.tsx** - Tarjeta de valor espec√≠fica
10. **ServiceCard.tsx** - Tarjeta de servicio espec√≠fica
11. **ClientCard.tsx** - Tarjeta de cliente espec√≠fica

### üîß Secciones Refactorizadas
- **Home.tsx**: Usando HeroTitle
- **Mission.astro**: Usando ValueCard y MissionCTA
- **Services.astro**: Usando ServiceCard
- **Clients.astro**: Usando ClientCard y StatsCard
- **Contact.tsx**: Usando Form y ContactMethods (refactorizaci√≥n completa)

### üêõ Problemas Resueltos
- ‚ùå **Cards no se mostraban** ‚Üí ‚úÖ Eliminado `client:load` de componentes React
- ‚ùå **HeroTitle excesivamente grande** ‚Üí ‚úÖ Corregidos tama√±os responsive
- ‚ùå **Error de renderer** ‚Üí ‚úÖ Corregidas importaciones con `.tsx`
- ‚ùå **Errores de tipos** ‚Üí ‚úÖ Corregidos tipos en CallToAction
- ‚ùå **Formulario no funcional** ‚Üí ‚úÖ Integraci√≥n completa con Formspree
- ‚ùå **C√≥digo duplicado** ‚Üí ‚úÖ Refactorizaci√≥n de Contact.tsx con componentes reutilizables

### üìß Integraci√≥n de Formspree
- **Configuraci√≥n**: Variable de entorno `PUBLIC_FORMSPREE_ENDPOINT_MAPEA`
- **Endpoint**: `https://formspree.io/f/mldpjkew`
- **M√©todo**: fetch nativo (sin @formspree/react)
- **Funcionalidad**: Env√≠o autom√°tico de emails desde formularios
- **Validaci√≥n**: Campos requeridos con mensajes de error
- **Estados**: Loading, success y error con auto-reset
- **Campos**: name, phone, email, message
- **Estructura de datos**: JSON con campos del formulario
- **Manejo de errores**: Try/catch con mensajes de error espec√≠ficos

#### üîÑ Flujo de Env√≠o del Formulario

**1. Validaci√≥n del Cliente:**
```typescript
// react-hook-form valida campos requeridos
const { register, handleSubmit, formState: { errors } } = useForm<ContactFormData>();
```

**2. Env√≠o a Formspree:**
```typescript
const response = await fetch(formspreeEndpoint, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: data.name,
    email: data.email,
    phone: data.phone,
    message: data.message,
  }),
});
```

**3. Manejo de Respuesta:**
- ‚úÖ **√âxito**: Muestra mensaje de confirmaci√≥n, resetea formulario
- ‚ùå **Error**: Muestra mensaje de error, mantiene datos del usuario
- ‚è≥ **Loading**: Deshabilita bot√≥n, muestra spinner

**4. Estados de UI:**
- `isSubmitting`: Durante el env√≠o
- `isSubmitted`: Mensaje de √©xito (5 segundos)
- `isError`: Mensaje de error (5 segundos)

#### ‚öôÔ∏è Configuraci√≥n del Entorno

**Archivo `.env`:**
```env
PUBLIC_FORMSPREE_ENDPOINT_MAPEA=https://formspree.io/f/mldpjkew
```

**Acceso en el c√≥digo:**
```typescript
const formspreeEndpoint = import.meta.env.PUBLIC_FORMSPREE_ENDPOINT_MAPEA;
```

**Notas importantes:**
- ‚úÖ **Prefijo `PUBLIC_`**: Requerido para variables accesibles en el cliente
- ‚úÖ **Validaci√≥n**: Se verifica que el endpoint est√© configurado
- ‚úÖ **Error handling**: Mensaje claro si falta la configuraci√≥n

### üìà Beneficios Obtenidos
- ‚úÖ **Reutilizaci√≥n**: 11 componentes reutilizables
- ‚úÖ **Mantenibilidad**: C√≥digo m√°s limpio y organizado
- ‚úÖ **Consistencia**: Dise√±o unificado
- ‚úÖ **Performance**: Lazy loading granular
- ‚úÖ **Testing**: Componentes individuales m√°s f√°ciles de testear
- ‚úÖ **Funcionalidad**: Formularios completamente funcionales con Formspree
- ‚úÖ **Modularidad**: Separaci√≥n clara de responsabilidades

---

## üìä M√©tricas y KPIs

### Performance
- **Lighthouse Score**: 90+ en todas las categor√≠as
- **First Contentful Paint**: < 1.5s
- **Largest Contentful Paint**: < 2.5s
- **Cumulative Layout Shift**: < 0.1

### SEO
- **Core Web Vitals**: Pass
- **Mobile Friendly**: ‚úÖ
- **Structured Data**: ‚úÖ
- **Hreflang**: ‚úÖ

### Accessibility
- **WCAG 2.1 AA**: Compliant
- **Keyboard Navigation**: ‚úÖ
- **Screen Reader**: ‚úÖ
- **Color Contrast**: ‚úÖ

---

## üõ°Ô∏è Seguridad y Mejores Pr√°cticas

### Seguridad
- **HTTPS**: Obligatorio en producci√≥n
- **CSP**: Content Security Policy
- **Sanitizaci√≥n**: Inputs del formulario
- **Dependencias**: Audit regular

### Mejores Pr√°cticas
- **TypeScript**: Type safety completo
- **ESLint**: Linting estricto
- **Prettier**: Formateo consistente
- **Git**: Conventional commits
- **Documentaci√≥n**: C√≥digo autodocumentado

---

## üìû Soporte y Mantenimiento

### Desarrollo
- **Node.js**: 18.x o superior
- **npm**: 9.x o superior
- **Astro**: 4.x
- **React**: 18.x

### Comandos √ötiles
```bash
# Desarrollo
npm run dev

# Build
npm run build

# Preview
npm run preview

# Linting
npm run lint

# Type checking
npm run type-check
```

### Estructura de Commits
```
feat: nueva funcionalidad
fix: correcci√≥n de bug
docs: documentaci√≥n
style: formato
refactor: refactorizaci√≥n
test: tests
chore: tareas de mantenimiento
```

---

## üìù Conclusi√≥n

MAPEA es una aplicaci√≥n web moderna y completa que demuestra las mejores pr√°cticas en desarrollo frontend. La combinaci√≥n de Astro, React, y un sistema i18n custom proporciona una base s√≥lida para una aplicaci√≥n multiling√ºe, performante y SEO-friendly.

La arquitectura modular y los componentes reutilizables facilitan el mantenimiento y la escalabilidad, mientras que las optimizaciones de performance y SEO aseguran una excelente experiencia de usuario y visibilidad en motores de b√∫squeda.

---

*Documentaci√≥n generada y actualizada - √öltima actualizaci√≥n: Octubre 2025*
